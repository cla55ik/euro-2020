var currentTab=0;function showTab(e){var t=document.getElementsByClassName("tab");0==currentTab&&document.getElementById("prevBtn").classList.add("hidden"),0!=currentTab&&document.getElementById("prevBtn").classList.remove("hidden"),currentTab!=t.length-1&&document.getElementById("nextBtn").classList.remove("hidden"),currentTab==t.length-1&&(document.getElementById("nextBtn").innerHTML="Submit"),t[e].classList.toggle("hidden")}function nextPrev(e){var t=document.getElementsByClassName("tab");currentTab==t.length-1&&(t[currentTab].classList.toggle("hidden"),document.getElementById("nextBtn").classList.add("hidden"),document.getElementById("prevBtn").classList.add("hidden"),submitForm()),currentTab!=t.length-1&&(showTab(currentTab),showTab(currentTab+=e))}function isUniqueVoiting(){var e=$("#stepform")[0],t=new FormData(e);t.append("type","isvoiting"),console.log("isUniqueVoiting"),$.ajax({url:"/controllers/post.php",type:"POST",data:t,contentType:!1,processData:!1,success:function(e){res=$.parseJSON(e),""!=res.error?$("#message").html("Ошибка "+res.error):"notunique"==res.status?(document.getElementById("div_btn_viewvoiting").classList.toggle("hidden"),document.getElementById("viewresult").style.backgroundColor="#B6CB67",document.getElementById("viewresult").style.color="#002B31",document.getElementById("div_btn_viewresult").style.width="100%",$("#message").html(res.message)):(document.getElementById("voiting").classList.remove("hidden"),document.getElementById("div_btn_viewvoiting").classList.toggle("hidden"),document.getElementById("div_btn_viewresult").classList.add("hidden"),showTab(currentTab),console.log("is unique"))},error:function(e,t,n){console.log(e.statusText),console.log(t),console.log(n),$("#message").html("Непредвиденная ошибка")}})}function submitForm(e){var t=$("#stepform")[0];(e=new FormData(t)).append("type","stepform"),$.ajax({url:"/controllers/post.php",type:"POST",data:e,contentType:!1,processData:!1,success:function(e){document.getElementById("voiting").style.display="none",res=$.parseJSON(e),""!=res.error?$("#message").html("Ошибка "+res.error):($("#message").html(res.message),document.getElementById("div_btn_viewresult").classList.remove("hidden"),document.getElementById("div_btn_viewresult").style.width="100%",document.getElementById("viewresult").style.color="#002B31",document.getElementById("viewresult").style.backgroundColor="#B6CB67")},error:function(e,t,n){console.log(e.statusText),console.log(t),console.log(n),$("#message").html("Непредвиденная ошибка")}})}function newPlayer(){var e=$("#newplayer")[0],t=new FormData(e);t.append("type","newplayer"),$.ajax({url:"/controllers/post.php",type:"POST",data:t,contentType:!1,processData:!1,success:function(e){res=$.parseJSON(e),""!=res.error?$("#message").html("Ошибка "+res.error):$("#message").html(res.message)},error:function(e,t,n){console.log(e.statusText),console.log(t),console.log(n),$("#message").html("Непредвиденная ошибка")}})}function viewResult(){$.ajax({url:"/controllers/post.php",type:"POST",data:{type:"viewresult"},success:function(e){res=$.parseJSON(e),""!=res.error?$("#message").html("Ошибка "+res.error):($("#message").html(res.message),renderResult(res))},error:function(e,t,n){console.log(e.statusText),console.log(t),console.log(n),$("#message").html("Непредвиденная ошибка")}})}function renderResult(e){if(document.getElementById("voiting_result").classList.contains("hidden")){document.getElementById("voiting_result").classList.toggle("hidden"),document.getElementById("viewresult").innerHTML="Скрыть результат";let t="/dist/img/forward-"+e.forward_img+".jpg";document.getElementById("forward_name").innerHTML=e.forward,document.getElementById("forward_img").src=t,document.getElementById("forward_percent").innerHTML=e.forward_percent;let n="/dist/img/central-"+e.central_img+".jpg";document.getElementById("central_name").innerHTML=e.central,document.getElementById("central_img").src=n,document.getElementById("central_percent").innerHTML=e.central_percent;let s="/dist/img/def-"+e.def_img+".jpg";document.getElementById("def_name").innerHTML=e.def,document.getElementById("def_img").src=s,document.getElementById("def_percent").innerHTML=e.def_percent;let r="/dist/img/gk-"+e.gk_img+".jpg";document.getElementById("gk_name").innerHTML=e.gk,document.getElementById("gk_img").src=r,document.getElementById("gk_percent").innerHTML=e.gk_percent}else document.getElementById("voiting_result").classList.toggle("hidden"),document.getElementById("viewresult").innerHTML="Показать результат"}document.addEventListener("DOMContentLoaded",function(){currentTab=0,console.log(currentTab),document.getElementById("voiting").classList.contains("hidden")?(document.getElementById("nextBtn").classList.add("hidden"),document.getElementById("prevBtn").classList.add("hidden")):showTab(currentTab)}),$("#newplayer").on("submit",function(e){e.preventDefault(),newPlayer()}),$("#viewresult").click(function(e){e.preventDefault(),viewResult()}),$("#viewvoiting").click(function(){console.log("click view"),isUniqueVoiting()});